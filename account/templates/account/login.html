{% extends 'account-base.html' %}
{% load static %}

{% block contents %}
<section id="home" class="relative min-h-[90vh] mt-20">
    <div class="container m-auto flex flex-col lg:flex-row gap-12 items-center justify-center">
        <div class="flex-1 w-1/2m-0 items-start border w-full lg:w-2/3 rounded-xl h-full aspect-1">
        </div>
        <div class="w-full lg:w-1/3">
            <h1 class="font-barriecito text-center">Start <span class="text-yellow-500">Growing</span> Today!</h1>
            <br>
            <form 
                class="max-w-md" method="POST" autocomplete="off"
                id="{{form.form_id}}" action="{% url 'login' %}" onsubmit="disableButton()">
                {% csrf_token %}
                {% for field in form %}
                    <div id="form-control" class="mb-2
                        {% if field.errors %}
                        text-sm
                        {% endif %}"
                    >
                        <div id="form-labels" class="mt-4">
                            {{ field.label_tag }}
                            {% if field.help_text %}
                                <small class="block text-gray-300/70">{{ field.help_text }}</small>
                            {% endif %}
                        </div> 
                        <div class="flex rounded-md shadow-sm ring-1 ring-inset bg-none
                            ring-gray-300 focus-within:ring-2 focus-within:ring-inset 
                            focus-within:ring-emerald-600 {% if field.name == 'subscribe' %}
                            w-5 h-5 mb-4{% endif %}">
                            {{ field }}
                        </div>
                        <div id="form-errors" class="text-red-400">
                            {{ field.errors }}
                        </div>
                    </div>
                {% endfor %}
                <br>
                {% include 'account/includes/form-submit-btn.html' %}
            </form>
        </div>
    </div>
</section>
{% endblock %}
{% block scripts %}
<script>
    const disableButton = () => {
        const submitBtn = document.getElementById('submit-button');
        const loadingSpinner = document.getElementById('loading-spinner');
        
        loadingSpinner.classList.remove("hidden");
        loadingSpinner.classList.add("inline");
    
        submitBtn.disabled = true;
        submitBtn.innerText = 'Sending...';
    };
    
</script>
{% endblock %}